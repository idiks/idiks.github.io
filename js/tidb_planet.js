!function(o){var n={};function a(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=o,a.c=n,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(o,n,function(e){return t[e]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/js/",a(a.s=13)}({0:function(e,t,o){"use strict";o.d(t,"a",function(){return c}),o.d(t,"b",function(){return s});var n=o(1),a=o.n(n),r="_tidb_planet_",i={CONTRIBUTIONS_RANK:"".concat(r,"contributions_rank"),USERNAME:"".concat(r,"username"),DATE:"".concat(r,"date"),AVATAR:"".concat(r,"avatar_url"),CONTRIBUTIONS:"".concat(r,"contributions"),FIRST_ACCESS:"".concat(r,"first_access")},c=function(){var e={};for(var t in i){var o=a.a.get(i[t]);e[t]=o}return e},s=function(e,t){a.a.set(i[e],t)}},1:function(a,r,i){var c,s;function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(e){var t=!1;if(void 0===(s="function"==typeof(c=e)?c.call(r,i,r,a):c)||(a.exports=s),t=!0,"object"===l(r)&&(a.exports=e(),t=!0),!t){var o=window.Cookies,n=window.Cookies=e();n.noConflict=function(){return window.Cookies=o,n}}}(function(){function m(){for(var e=0,t={};e<arguments.length;e++){var o=arguments[e];for(var n in o)t[n]=o[n]}return t}return function e(p){function v(e,t,o){var n;if("undefined"!=typeof document){if(1<arguments.length){if("number"==typeof(o=m({path:"/"},v.defaults,o)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*o.expires),o.expires=a}o.expires=o.expires?o.expires.toUTCString():"";try{n=JSON.stringify(t),/^[\{\[]/.test(n)&&(t=n)}catch(e){}t=p.write?p.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var r="";for(var i in o)o[i]&&(r+="; "+i,!0!==o[i]&&(r+="="+o[i]));return document.cookie=e+"="+t+r}e||(n={});for(var c=document.cookie?document.cookie.split("; "):[],s=/(%[0-9A-Z]{2})+/g,l=0;l<c.length;l++){var u=c[l].split("="),d=u.slice(1).join("=");this.json||'"'!==d.charAt(0)||(d=d.slice(1,-1));try{var f=u[0].replace(s,decodeURIComponent);if(d=p.read?p.read(d,f):p(d,f)||d.replace(s,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(e){}if(e===f){n=d;break}e||(n[f]=d)}catch(e){}}return n}}return(v.set=v).get=function(e){return v.call(v,e)},v.getJSON=function(){return v.apply({json:!0},[].slice.call(arguments))},v.defaults={},v.remove=function(e,t){v(e,"",m(t,{expires:-1}))},v.withConverter=e,v}(function(){})})},13:function(e,t,o){"use strict";o.r(t);var n=o(0);$.ajax({url:"https://idiks.com/api/contributors",crossDomain:!0,success:function(e){window.tidbContributors=e.data,e.data&&($(".j-amount").text(e.data.length),$(".j-show").show())}});function a(e){return/^[a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38}$/i.test(e)}function r(){return!Object(n.a)().FIRST_ACCESS}function i(){$(".input-container .inner").removeClass("error"),$(".input-container .inner").remove(),$(".form__input").val(null)}function c(){$(".j-video-overlay").fadeIn(),$(".j-video-overlay, .modal").addClass("active");var e=document.querySelector("video").play();void 0!==e&&e.catch(function(e){console.log("Auto-play was prevented by browser")}).then(function(){}),u()}function s(o){var e=window.tidbContributors;e.sort(function(e,t){var o=e.login.toUpperCase(),n=t.login.toUpperCase();return o<n?-1:n<o?1:0});var n=_.floor(e.length/5),a=[];e.forEach(function(e,t){o<4?o*n<=t&&t<(o+1)*n&&a.push(e):o*n<=t&&a.push(e)}),a.forEach(function(e){var t,o,n;n='  <div class="list__item">    <div class="github-avatar">      <img src="'.concat((t=e).avatar_url,'" width="36px" height="36px"/>    </div>    <div class="contributor-info">      <div class="contributor-name"><a href="https://github.com/').concat(t.login,'" target="_blank">').concat(t.login,'</a></div>      <div class="contribution-degree" data-degree="').concat(0<=(o=t.contributions)&&o<=5?1:6<=o&&o<=10?2:11<=o&&o<=20?3:4,'">        <span class="dot dot-1"></span>        <span class="dot dot-2"></span>        <span class="dot dot-3"></span>        <span class="dot dot-4"></span>      </div>    </div>  </div> '),$("#contributors").append(n)})}function l(){var e=$(".modal-overlay.active").data("type");$(".modal-overlay").fadeOut(),$(".modal-overlay, .modal").removeClass("active"),"login"===e&&i(),"video"===e&&$("#video")[0].pause(),"contributors"===e&&$("#contributors").html(""),"capture"===e&&$(".html2image-container").removeClass("show")}var u=function(){document.addEventListener("WeixinJSBridgeReady",function(){$("#video")[0].play()})};$(function(){$("body").hasClass("welcome-page")&&!r()&&$("body").append('<div class="guide-again scale-in-center">Click these elements and explore the planet again!</div>'),Object(n.a)().USERNAME||($(".j-login").show(),$("body").hasClass("welcome-page")&&r()&&(Object(n.b)("FIRST_ACCESS","-1"),$("body").append('<div class="mask j-mask"></div>'))),$("body").hasClass("milestones-page")&&c(),$(".nav").fadeIn(),768<$("body")[0].offsetWidth?$(".j-forward").addClass("animation-forward_arrow"):$(".j-login").css("display","none"),setTimeout(function(){$(".j-fadeOutSlowly").fadeOut("slow")},5e3),$("#video").on("ended",function(){console.log("Video has ended!"),$(".j-video-overlay").fadeOut(),$(".j-video-overlay, .modal").removeClass("active")}),$(".close-modal").off("click").on("click",function(e){l(),e.preventDefault(),e.stopPropagation()}),$(".modal-overlay").on("click",function(e){$(this).hasClass("active")&&_.isEqual(e.target,e.delegateTarget)&&l()}),$(".j-login").on("click",function(e){$(".j-login-overlay").fadeIn(),$(".j-login-overlay, .modal").addClass("active"),e.preventDefault(),e.stopPropagation()}),$(".j-later").on("click",function(e){$(".j-login-overlay").fadeOut(),$(".j-login-overlay, .modal").removeClass("active"),i(),e.preventDefault(),e.stopPropagation()}),$(".j-open-dorm").off("click").on("click",function(e){var t=$(this).data("index");s(t),$(".j-contributors-overlay").fadeIn(),$(".j-contributors-overlay, .modal").addClass("active"),e.preventDefault(),e.stopPropagation()}),$(".j-video-btn").on("click",function(e){c(),e.preventDefault(),e.stopPropagation()}),$(".j-popup").on("click",function(e){$(".popup").fadeOut(),e.preventDefault(),e.stopPropagation()}),$(".j-open-popup").on("click",function(e){$(".popup").fadeIn(),e.preventDefault(),e.stopPropagation()}),$(".j-readmore").on("click",function(e){"zh"==navigator.language.substring(0,2)&&$(this).attr("href","https://idiks.com/docs-cn/releases/3.0beta/"),window.open($(this).attr("href")),e.preventDefault(),e.stopPropagation()}),$(".form__input").blur(function(){a($(this).val())||$(".error").length||($(".input-container").append('<span class="inner" >Please enter a valid username.</span>'),setTimeout(function(){$(".input-container .inner").addClass("error")},100))}),$(".form__input").focus(function(){$(".input-container .inner").removeClass("error"),$(".input-container .inner").remove()}),$(".form").submit(function(e){$(".form__input").blur();var t=$(".form__input").val();a(t)&&($(".modal-login").addClass("landing"),function(t){var e=window.tidbContributors.findIndex(function(e){return e.login.toLowerCase()===t.toLowerCase()});if(-1<e){var o=window.tidbContributors[e];Object(n.b)("CONTRIBUTIONS_RANK",e+1),Object(n.b)("DATE",o.date),Object(n.b)("CONTRIBUTIONS",o.contributions),Object(n.b)("AVATAR",o.avatar_url)}else console.log("Welcome to the TiDB planet, join us now! www.pingcap.com")}(t),Object(n.b)("USERNAME",t),setTimeout(function(){location.href="/tidb-planet/user/"},2e3)),e.preventDefault()}),function(){for(var e=document.getElementById("meteors"),t=document.getElementsByClassName("meteor"),o=0;o<2;o++){var n=document.createElement("div");n.className="meteor",n.style.top=a(60,-30)+"px",n.style.left=a(150,20)+"px",e.appendChild(n)}function a(e,t){return Math.floor(Math.random()*(e-t+1)*10+t)}for(var r=0,i=t.length;r<i;r++)t[r].style.animationDelay=r%6==0?"0s":.8*r+"s"}()})}});