<!doctype html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<script>
window.ga =
    window.ga ||
    function() {
        ;(ga.q = ga.q || []).push(arguments)
    }
ga.l = +new Date()
ga('create', 'UA-99991864-4', 'auto')
ga('send', 'pageview')
</script>
<script async src="https://static.idiks.com/js/ga-analytics.js"></script>



<link rel="stylesheet" href="https://static.idiks.com/style/github-markdown.css">


<link rel="stylesheet" href="/css/doc.css">

    
    <title>Getting Started with JuiceFS Using TiKV |&nbsp;TiDB</title><link rel="icon" href="/images/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<meta name="description" content="JuiceFS is an open-source, cloud-native distributed file system that allows users to freely choose the backend storage engine. This post introduces how to use TiKV as a metadata engine for JuiceFS.">
<meta name="robots" content="noodp">
<meta name="keywords" content="TiDB, MySQL, HTAP, Open Source, Cloud-Native, NewSQL, Aurora Alternative">
<meta property="og:locale" content="en_US">
<meta property="og:type" content="website">
<meta property="og:title" content="Getting Started with JuiceFS Using TiKV | TiDB">
<meta property="og:description" content="JuiceFS is an open-source, cloud-native distributed file system that allows users to freely choose the backend storage engine. This post introduces how to use TiKV as a metadata engine for JuiceFS.">
<meta property="og:url" content="https://idiks.com/blog/get-started-with-juicefs-using-tikv/">
<meta property="og:site_name" content="MySQL at Scale. No more manual sharding">
<meta property="og:image" content="/images/blog/get-started-with-juicefs-using-tikv.png">
<meta property="og:image:secure_url" content="/images/blog/get-started-with-juicefs-using-tikv.png"><meta name="twitter:card" content="summary_large_image">
<meta name="og:image:width" content="1200">
<meta name="og:image:height" content="600"><meta name="twitter:description" content="JuiceFS is an open-source, cloud-native distributed file system that allows users to freely choose the backend storage engine. This post introduces how to use TiKV as a metadata engine for JuiceFS.">
<meta name="twitter:title" content="Getting Started with JuiceFS Using TiKV | TiDB">
<meta name="twitter:site" content="@pingcap">
<meta name="twitter:image" content="https://static.idiks.com/images/blog/get-started-with-juicefs-using-tikv.png"><meta name="twitter:creator" content="@pingcap">





<script type="application/ld+json">
{
    "@context": "http:\/\/schema.org",
    "@type": "WebSite",
    "url": "https:\/\/pingcap.com\/",
    "name": "PingCAP",
    "potentialAction": {
        "@type": "SearchAction",
        "target": "https:\/\/pingcap.com\/?s={search_term_string}",
        "query-input": "required name=search_term_string"
    }
}
</script>


<script>
    (function(){
        var bp = document.createElement('script');
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>


<script type="text/javascript" async src="https://accounts.pingcap.com/static/pingcap_sso/js/track.beta.js"></script>
    
<link rel="preload" href="https://static.idiks.com/fonts/lato/lato-regular-webfont.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://static.idiks.com/fonts/lato/lato-regular-webfont.woff" as="font" type="font/woff" crossorigin="anonymous">
<link rel="preload" href="https://static.idiks.com/fonts/lato/lato-regular-webfont.ttf" as="font" type="font/ttf" crossorigin="anonymous">
<link rel="preload" href="https://static.idiks.com/fonts/titilliumweb/titilliumweb-regular-webfont.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://static.idiks.com/fonts/titilliumweb/titilliumweb-regular-webfont.woff" as="font" type="font/woff" crossorigin="anonymous">
<link rel="preload" href="https://static.idiks.com/fonts/titilliumweb/titilliumweb-regular-webfont.ttf" as="font" type="font/ttf" crossorigin="anonymous">

<link rel="preload" href="https://static.idiks.com/js/jquery.min.js" as="script">


<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="https://static.idiks.com/style/docsearch.min.css">
<script type="text/javascript">
var trackOutboundLink = function(url) {
  var redirectTriggered = false
  ga('send', 'event', 'outbound', 'click', url, {
    hitCallback: function() {
      redirectTriggered = true
      document.location = url
    }
  })
  setTimeout(function() {
    if (!redirectTriggered) {
      document.location = url
    }
  }, 1500)
}

var trackViews = function(btn_type, event_category) {
  var event_label = btn_type
  var eventCategory = event_category
  ga('send', 'event', {
    'eventCategory': eventCategory,
    'eventAction': 'click',
    'eventLabel': event_label,
    'transport': 'beacon'
  });
}
</script>
<script>if (location.pathname === '/') {
        if (location.hostname === 'idiks.github.io') {
            location.href = '/en/'
        }
    }</script></head>       <body data-lang="en" ><div id="page-content">

<header role="navigation" class="fixed-top">
    <div class="container">
        <a class="nav-brand" href="/en"><img src="/images/pingcap-logo.png" alt="PingCAP"></a>
        <div class="nav-wrapper">
            <div class="navigation">
                <ul>
                <li ><a class="a-en" href="https://idiks.com">Cloud</a></li>
                <li ><a class="a-en" class="tidb-academy"
                    href="/tidb-academy">iDIKS Academy</a></li>
                <li class="docs-type-selector " id="docsTypeSelector">
                    <a class="header-doc-nav" href="#">Docs</a>
                    <div class="header-dropdown-menu" id="docsTypeSelectorItem">
                        <a class="header-dropdown-item" href="/docs/stable/">TiDB</a>
                        <a class="header-dropdown-item" href="/docs/tidb-in-kubernetes/stable/">TiDB in Kubernetes</a>
                        <a class="header-dropdown-item" href="/docs/tidb-data-migration/stable/">TiDB Data Migration (DM)</a>
                    </div>
                </li>
                
                <li ><a class="a-en" href="/success-stories">Success
                    Stories</a></li>
                <li class="sel" ><a class="a-en" href="/blog">Blog</a></li>
                <li ><a class="link-download link-download-en" href="/download">Free Download</a></li>
                </ul>
            </div>
            <div class="global-search">
                
                
                
                <div class="search-wrapper">
    <span class="icon-search"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="#fff" viewBox="0 0 67.125 67.125"><path d="M23.902 0C11.01 0 .523 10.488.523 23.38c0 12.891 10.487 23.379 23.379 23.379a23.258 23.258 0 0 0 14.471-5.037l24.816 24.817c.391.391.902.586 1.414.586s1.023-.195 1.414-.586a2 2 0 0 0 0-2.828L41.293 38.985c3.721-4.142 5.989-9.613 5.989-15.605C47.282 10.488 36.794 0 23.902 0zM4.523 23.38C4.523 12.694 13.216 4 23.902 4c10.687 0 19.38 8.694 19.38 19.38 0 5.396-2.221 10.279-5.791 13.795a1.959 1.959 0 0 0-.488.349 2.003 2.003 0 0 0-.271.343C33.31 40.9 28.825 42.76 23.903 42.76c-10.686-.001-19.38-8.695-19.38-19.38z"/><path d="M24.075 8.591c-8.25 0-14.962 6.712-14.962 14.962a2 2 0 0 0 4 0c0-6.044 4.918-10.962 10.962-10.962a2 2 0 0 0 0-4z"/></svg></span>
    <input data-lang="en" data-type="" type="search" id="search-input" name="q"
        placeholder="Search TiDB Docs">
</div>

<script>
    const inputNode = document.getElementById("search-input")

    inputNode.addEventListener('keyup', ({key}) => {
        if (key === "Enter") {
            if ($('#search-input').data('lang') == 'cn') {
                lang = 'zh'
            }

            const query = $('#search-input').val()
            if (query) {
                url = "https://idiks.com/docs" + (lang == 'zh' ? 'zh/' : '') + "search/?lang=" + lang + "&type=tidb&version=v4.0&q=" + query
                window.location.href = url
            }
        }
    })
</script>

            </div>
        </div>
        <div class="nav-btn nav-slider">
            <i class="material-icons"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 459 459"><path d="M0 382.5h459v-51H0v51zM0 255h459v-51H0v51zM0 76.5v51h459v-51H0z" fill="#FFF"/></svg></i>
        </div>
    </div>
</header>



<nav class="mobile-sidebar">
    <div class="nav-header">
        <div class="logo-wrap">
        <a class="nav-brand" href="/en"><img src="/images/pingcap-logo.png" alt="PingCAP"></a>
        </div>
    </div>
    <ul class="ul-base">
        <li ><a href="https://idiks.com/">Cloud</a></li>
        <li ><a class="tidb-academy" href="/tidb-academy">TiDB Academy</a></li>
        <li class="docs-type-selector " id="docsTypeSelector">
            <p class="header-doc-nav">Docs</p>
            <div class="header-dropdown-menu" id="docsTypeSelectorItem">
                <a class="header-dropdown-item" href="/docs/stable/">TiDB</a>
                <a class="header-dropdown-item" href="/docs/tidb-in-kubernetes/stable/">TiDB in Kubernetes</a>
                <a class="header-dropdown-item" href="/docs/tidb-data-migration/stable/">TiDB Data Migration (DM)</a>
            </div>
        </li>
        <li ><a href="/success-stories">Success Stories</a></li>
        <li class="sel"><a href="/blog">Blog</a></li>
        <li><a class="link-download" href="/download">Free Download</a></li>
    </ul>
    <div class="nav-footer">
        <div class="contact-list-wrap">
        <div class="flex-list">
            <h4 class="list-title"><strong>Contact</strong></h4>
            <ul class="social ul-base">
            <li><a href="https://twitter.com/PingCAP" class="twitter" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" width="18" height="18"><path d="M612 116.258a250.714 250.714 0 0 1-72.088 19.772c25.929-15.527 45.777-40.155 55.184-69.411-24.322 14.379-51.169 24.82-79.775 30.48-22.907-24.437-55.49-39.658-91.63-39.658-69.334 0-125.551 56.217-125.551 125.513 0 9.828 1.109 19.427 3.251 28.606-104.326-5.24-196.835-55.223-258.75-131.174-10.823 18.51-16.98 40.078-16.98 63.101 0 43.559 22.181 81.993 55.835 104.479a125.556 125.556 0 0 1-56.867-15.756v1.568c0 60.806 43.291 111.554 100.693 123.104-10.517 2.83-21.607 4.398-33.08 4.398-8.107 0-15.947-.803-23.634-2.333 15.985 49.907 62.336 86.199 117.253 87.194-42.947 33.654-97.099 53.655-155.916 53.655-10.134 0-20.116-.612-29.944-1.721 55.567 35.681 121.536 56.485 192.438 56.485 230.948 0 357.188-191.291 357.188-357.188l-.421-16.253c24.666-17.593 46.005-39.697 62.794-64.861z"/></svg></a></li>
            <li><a href="https://www.linkedin.com/company/pingcap/" class="linkedin" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 438.536 438.535"><path d="M5.424 145.895H99.64v282.932H5.424zM408.842 171.739c-19.791-21.604-45.967-32.408-78.512-32.408-11.991 0-22.891 1.475-32.695 4.427-9.801 2.95-18.079 7.089-24.838 12.419-6.755 5.33-12.135 10.278-16.129 14.844-3.798 4.337-7.512 9.389-11.136 15.104v-40.232h-93.935l.288 13.706c.193 9.139.288 37.307.288 84.508 0 47.205-.19 108.777-.572 184.722h93.931V270.942c0-9.705 1.041-17.412 3.139-23.127 4-9.712 10.037-17.843 18.131-24.407 8.093-6.572 18.13-9.855 30.125-9.855 16.364 0 28.407 5.662 36.117 16.987 7.707 11.324 11.561 26.98 11.561 46.966V428.82h93.931V266.664c-.007-41.688-9.897-73.328-29.694-94.925zM53.103 9.708c-15.796 0-28.595 4.619-38.4 13.848C4.899 32.787 0 44.441 0 58.529 0 72.42 4.758 84.034 14.275 93.358c9.514 9.325 22.078 13.99 37.685 13.99h.571c15.99 0 28.887-4.661 38.688-13.99 9.801-9.324 14.606-20.934 14.417-34.829-.19-14.087-5.047-25.742-14.561-34.973C81.562 14.323 68.9 9.708 53.103 9.708z"/></svg></a></li>
            <li><a href="https://www.reddit.com/r/TiDB/" class="reddit" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 279.748 279.748" width="18" height="18"><path d="M279.748 133.142c0-19.299-15.701-35-35-35-10.768 0-20.674 4.812-27.279 13.064-18.532-8.431-39.663-13.626-62.015-15.271l19.206-60.692 42.895 9.294c3.285 12.782 14.901 22.258 28.693 22.258 16.336 0 29.627-13.29 29.627-29.626 0-16.336-13.291-29.627-29.627-29.627-11.801 0-21.999 6.941-26.759 16.95l-49.497-10.725a10.002 10.002 0 0 0-11.651 6.756L134.636 95.43c-26.164.638-50.988 6.053-72.356 15.775-6.606-8.251-16.512-13.063-27.28-13.063-19.299 0-35 15.701-35 35 0 9.373 3.683 18.173 10.222 24.709-3.9 8.37-5.875 17.076-5.875 25.936 0 24.048 14.396 46.492 40.538 63.199 25.447 16.264 59.183 25.221 94.989 25.221 35.808 0 69.542-8.957 94.989-25.221 26.142-16.707 40.538-39.151 40.538-63.199 0-8.859-1.975-17.565-5.875-25.936 6.539-6.537 10.222-15.336 10.222-24.709zM15.369 145.139c-2.212-3.59-3.369-7.688-3.369-11.997 0-12.682 10.317-23 23-23 5.444 0 10.558 1.851 14.649 5.258-14.622 8.302-26.132 18.289-34.28 29.739zm52.671 20.266c0-13.785 11.215-25 25-25s25 11.215 25 25-11.215 25-25 25-25-11.215-25-25zm123.119 57.054c-9.745 10.637-29.396 17.244-51.285 17.244-21.888 0-41.539-6.607-51.284-17.244a9.937 9.937 0 0 1-2.617-7.192 9.933 9.933 0 0 1 3.235-6.937 9.974 9.974 0 0 1 6.754-2.627c2.797 0 5.484 1.183 7.373 3.244 5.803 6.333 20.827 10.756 36.539 10.756s30.737-4.423 36.539-10.756a10.022 10.022 0 0 1 7.374-3.244c2.508 0 4.906.933 6.755 2.627a9.928 9.928 0 0 1 3.234 6.937 9.933 9.933 0 0 1-2.617 7.192zm-4.451-32.054c-13.785 0-25-11.215-25-25s11.215-25 25-25 25 11.215 25 25-11.215 25-25 25zm77.671-45.266c-8.147-11.45-19.657-21.436-34.28-29.739 4.092-3.408 9.205-5.258 14.649-5.258 12.683 0 23 10.318 23 23 0 4.309-1.157 8.407-3.369 11.997z"/></svg></a></li>
            <li><a href="https://groups.google.com/forum/#!forum/tidb-user" class="google-plus" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 491.858 491.858" width="18" height="18"><path d="M377.472 224.957H201.319v58.718H308.79c-16.032 51.048-63.714 88.077-120.055 88.077-69.492 0-125.823-56.335-125.823-125.824 0-69.492 56.333-125.823 125.823-125.823 34.994 0 66.645 14.289 89.452 37.346l42.622-46.328c-34.04-33.355-80.65-53.929-132.074-53.929C84.5 57.193 0 141.693 0 245.928s84.5 188.737 188.736 188.737c91.307 0 171.248-64.844 188.737-150.989v-58.718l-.001-.001zM491.858 224.857h-36.031v-36.031h-30.886v36.031H388.91v30.883h36.031v36.032h30.886V255.74h36.031z"/></svg></a></li>
            <li><a href="https://stackoverflow.com/questions/tagged/tidb" class="stack-overflow" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 547.597 547.597"><path d="M140.81 475.111h.024l189.91-.269c8.434-.013 15.3-6.886 15.3-15.318v-21.298c0-8.428-6.854-15.288-15.3-15.288l-189.91.264c-8.433.012-15.3 6.885-15.3 15.318v21.31c.001 8.427 6.855 15.281 15.276 15.281z"/><path d="M58.667 517.854c.073 29.26.073 29.449 3.072 29.449h.055l10.612.294h.086s85.814 0 171.629-.036c42.914-.019 85.821-.05 118-.092 16.09-.019 29.505-.043 38.887-.074 17.803-.055 17.803-.055 17.803-3.072l.3-10.697V333.299c0-8.434-6.866-15.3-15.3-15.3h-11.909c-8.434 0-15.3 6.866-15.3 15.3V496.22c0 5.062-4.119 9.18-9.181 9.18H110.51c-5.061 0-9.18-4.118-9.18-9.18V333.299c0-8.434-6.867-15.3-15.3-15.3H73.82c-8.433 0-15.3 6.86-15.3 15.3 0 23.342.012 76.084.055 122.981.019 23.447.05 45.442.092 61.574z"/><path d="M142.322 397.399l189.402 17.467c.478.043.948.062 1.413.062 7.956 0 14.468-5.985 15.159-13.917l1.83-21.096c.729-8.396-5.508-15.851-13.898-16.628l-189.102-17.461c-8.593-.795-15.869 5.441-16.653 13.825l-1.97 21.108a15.172 15.172 0 0 0 3.452 11.181 15.19 15.19 0 0 0 10.367 5.459zM437.636 208.849a15.253 15.253 0 0 0 17.694 12.443l21.065-3.678c8.311-1.451 13.898-9.395 12.454-17.706l-32.504-187.23c-1.42-8.207-9.21-13.917-17.692-12.448l-21.065 3.678c-8.311 1.451-13.898 9.395-12.454 17.705l32.502 187.236zM190.333 194.375l163.6 96.708a15.28 15.28 0 0 0 7.778 2.136c5.393 0 10.447-2.876 13.183-7.509l10.876-18.36c2.08-3.519 2.674-7.631 1.658-11.591a15.18 15.18 0 0 0-7.032-9.358l-163.6-96.714c-7.014-4.149-16.836-1.597-20.967 5.374l-10.869 18.36a15.2 15.2 0 0 0-1.658 11.591 15.21 15.21 0 0 0 7.031 9.363zM387.525 240.501a15.276 15.276 0 0 0 12.626 6.659c3.091 0 6.077-.924 8.635-2.681l17.405-11.934c6.953-4.768 8.752-14.314 4.015-21.292L323.29 54.104c-4.584-6.732-14.498-8.623-21.236-3.984l-17.737 12.21c-6.945 4.779-8.727 14.327-3.971 21.291l107.179 156.88zM154.482 302.319l183.465 49.156c1.298.349 2.632.526 3.966.526 6.903 0 12.98-4.67 14.762-11.347l5.508-20.624c2.179-8.152-2.681-16.555-10.826-18.74l-183.465-49.162c-8.017-2.148-16.604 2.852-18.728 10.826l-5.508 20.63c-2.179 8.142 2.68 16.551 10.826 18.735z"/></svg></a></li>
            </ul>
        </div>
        <div class="subscribe">
            <a href="https://share.hsforms.com/1e2W03wLJQQKPd1d9rCbj_Q2npzm"><button class="btn btn-subscribe f-tc" style="margin-left: 0.75rem;">Subscribe to Blog</button></a>
        </div>
        </div>
        <div class="container">
        <a href="/blog-cn" class="btn-lang" id="lang">中文</a>
        </div>
    </div>
</nav>

<div class="blog">
        <div class="blogArticle__container">
            
            <div class="archive"><div class="article-nav">
                            <a href="/blog/#Community">BLOG HOME</a> <span> > </span>Community</div><div class="content markdown-body">
                    <h1 class="title">Getting Started with JuiceFS Using TiKV</h1>
                    <ul class="blog-post-meta">
                        <li class="meta-item">
                            <img src="/images/svgs/icon-date.svg" alt="Date icon">Fri, Sep 17, 2021</li>
                        <li class="meta-item">
                            <img src="/images/svgs/icon-writer.svg" alt="Pen icon">Herald Yu</li>
                    </ul>
                    <div class="blog-text"><p><strong>Author:</strong> Herald Yu (Director of Marketing at Juicedata)</p>
<p><strong>Editor:</strong> <a href="https://github.com/ran-huang">Ran Huang</a></p>
<p><img src="media/get-started-with-juicefs-using-tikv.png" alt="Getting Started with JuiceFS Using TiKV"></p>
<p>As a cloud-native distributed storage system, <a href="https://juicefs.com/?hl=en">JuiceFS</a> was designed into a plug-in structure at the beginning of its birth to ensure that new technologies can be continuously integrated into the JuiceFS ecosystem. According to your needs, you can flexibly choose two core components, the data storage engine and the metadata engine, according to their needs.</p>
<p>The data storage engine is mainly object storage. It supports almost all public and private cloud object storage services, as well as KV storage, WebDAV, and local disks. The metadata engine supports databases such as Redis, MySQL, PostgreSQL, and SQLite.</p>
<p>The newly released JuiceFS v0.16 officially supports TiKV, a distributed key-value database, which further meets the requirements for elastic scaling in high-performance, large-scale data storage.</p>
<p>In this article, I'll share with you how to use JuiceFS and select TiKV as a metadata engine.</p>
<h2 id="tikv-a-highly-scalable-kv-database">TiKV, a highly scalable KV database</h2>
<p>TiKV is a distributed transactional key-value database featuring high scalability, low latency, and ease of use. It easily processes over a trillion rows of data in petabytes.</p>
<p>TiKV supports unlimited horizontal scaling and provides a distributed transaction interface that meets ACID compliance. It also ensures data consistency and high availability of multiple replicas using the <a href="https://raft.github.io/raft.pdf">Raft protocol</a>.</p>
<p><img src="media/juicefs-tikv-architecture.png" alt="TiKV architecture"></p>
<div class="caption-center">TiKV architecture</div>
<p>TiKV was developed by <a href="https://pingcap.com/about">PingCAP</a> and is a graduated project of the Cloud Native Computing Foundation (CNCF).</p>
<h2 id="install-tikv">Install TiKV</h2>
<p>PingCAP provides TiUP, a package manager, which can easily install TiKV on Linux or macOS.</p>
<h3 id="install-tiup">Install TiUP</h3>
<p>This command downloads and installs the appropriate TiUP version to your system.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">curl --proto <span style="color:#e6db74">&#39;=https&#39;</span> --tlsv1.2 -sSf https://tiup-mirrors.pingcap.com/install.sh | sh
</code></pre></div><p>For the settings to take effect, you can open a new terminal, or manually declare the global environment variable as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">source .bash_profile
</code></pre></div><p>Now try to execute the command <code>tiup -v</code> and see the version information similar to the following, which means the installation is successful.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">tiup -v

1.5.4 tiup
Go Version: go1.16.6
Git Ref: v1.5.4
GitHash: b629670276269cd1518eb28f362a5180135cc985
</code></pre></div><h4 id="deploy-a-tikv-cluster">Deploy a TiKV cluster</h4>
<p>For testing purposes, we'll use the TiUP <code>playground</code> component to install a minimal TiKV test cluster in the local environment.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">tiup playground --mode tikv-slim
</code></pre></div><p>After the deployment is successful, the terminal displays a message similar to the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">PD client endpoints: [127.0.0.1:2379]
To view the Prometheus:[ http://127.0.0.1:9090](http://127.0.0.1:9090/)
To view the Grafana:[ ](http://127.0.0.1:3000/)http://127.0.0.1:3000
</code></pre></div><p>Among them, <code>&lt;127.0.0.1:2379&gt;</code> is the <a href="https://github.com/tikv/pd">Placement Driver</a> (PD) address, which manages and schedules the TiKV cluster. JuiceFS will interact with TiKV through this address. The other two addresses are Prometheus and Grafana services, which are used for monitoring and data visualization of TiKV clusters.</p>
<p><strong>Note</strong>: The playground component of TiUP is mainly used to quickly build a minimal test cluster of TiDB and TiKV in the local environment. For production environment deployment, please refer to <a href="https://tikv.org/docs/5.1/deploy/install/install/">TiKV Official Document</a>.</p>
<h2 id="install-juicefs">Install JuiceFS</h2>
<p>JuiceFS supports Linux, Windows, and macOS systems. You only need to download the corresponding version of the client program and place it in the executable path of the system. For example, I use a Linux distribution, so I can install the latest version of the client by executing the following commands in sequence.</p>
<p>Check the current system information and set temporary environment variables:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">JFS_LATEST_TAG<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>curl -s https://api.github.com/repos/juicedata/juicefs/releases/latest | grep <span style="color:#e6db74">&#39;tag_name&#39;</span> | cut -d <span style="color:#e6db74">&#39;&#34;&#39;</span> -f <span style="color:#ae81ff">4</span> | tr -d <span style="color:#e6db74">&#39;v&#39;</span><span style="color:#66d9ef">)</span>
</code></pre></div><p>Download the latest version of the JuiceFS client corresponding to your system:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">wget <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">https://github.com/juicedata/juicefs/releases/download/v</span><span style="color:#e6db74">${</span>JFS_LATEST_TAG<span style="color:#e6db74">}</span><span style="color:#e6db74">/juicefs-</span><span style="color:#e6db74">${</span>JFS_LATEST_TAG<span style="color:#e6db74">}</span><span style="color:#e6db74">-linux-amd64.tar.gz</span><span style="color:#e6db74">&#34;</span>
</code></pre></div><p>Unzip the package:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">mkdir juice <span style="color:#f92672">&amp;&amp;</span> tar -zxvf <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">juicefs-</span><span style="color:#e6db74">${</span>JFS_LATEST_TAG<span style="color:#e6db74">}</span><span style="color:#e6db74">-linux-amd64.tar.gz</span><span style="color:#e6db74">&#34;</span> -C juice
</code></pre></div><p>Install JuiceFS client to <code>/usr/local/bin</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo install juice/juicefs /usr/local/bin
</code></pre></div><p>Execute the command and see the help information returned, which means that the client is installed successfully.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">juicefs

NAME:
  juicefs - A POSIX file system built on Redis and object storage.

USAGE:
  juicefs <span style="color:#f92672">[</span>global options<span style="color:#f92672">]</span> command <span style="color:#f92672">[</span>command options<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>arguments...<span style="color:#f92672">]</span>

VERSION:
  0.16.1 <span style="color:#f92672">(</span>2021-08-16 2edcfc0<span style="color:#f92672">)</span>

COMMANDS:
  format   format a volume
  mount    mount a volume
  umount   unmount a volume
  gateway  S3-compatible gateway
  sync     sync between two storage
  rmr      remove directories recursively
  info     show internal information <span style="color:#66d9ef">for</span> paths or inodes
  bench    run benchmark to read/write/stat big/small files
  gc       collect any leaked objects
  fsck     Check consistency of file system
  profile  analyze access log
  stats    show runtime stats
  status   show status of JuiceFS
  warmup   build cache <span style="color:#66d9ef">for</span> target directories/files
  dump     dump metadata into a JSON file
  load     load metadata from a previously dumped JSON file
  help, h  Shows a list of commands or help <span style="color:#66d9ef">for</span> one command

GLOBAL OPTIONS:
  --verbose, --debug, -v  enable debug log <span style="color:#f92672">(</span>default: false<span style="color:#f92672">)</span>
  --quiet, -q             only warning and errors <span style="color:#f92672">(</span>default: false<span style="color:#f92672">)</span>
  --trace                 enable trace log <span style="color:#f92672">(</span>default: false<span style="color:#f92672">)</span>
  --no-agent              Disable pprof <span style="color:#f92672">(</span>:6060<span style="color:#f92672">)</span> and gops <span style="color:#f92672">(</span>:6070<span style="color:#f92672">)</span> agent <span style="color:#f92672">(</span>default: false<span style="color:#f92672">)</span>
  --help, -h              show help <span style="color:#f92672">(</span>default: false<span style="color:#f92672">)</span>
  --version, -V           print only the version <span style="color:#f92672">(</span>default: false<span style="color:#f92672">)</span>

COPYRIGHT:
  AGPLv3
</code></pre></div><p>You can also visit the <a href="https://github.com/juicedata/juicefs/releases">JuiceFS GitHub Releases</a> page to select other versions for manual installation.</p>
<div class="trackable-btns">
  <a href="/download" onclick="trackViews('Getting Started with JuiceFS Using TiKV', 'download-tidb-btn-middle')"><button>Download TiDB</button></a>
  <a href="https://share.hsforms.com/1e2W03wLJQQKPd1d9rCbj_Q2npzm" onclick="trackViews('Getting Started with JuiceFS Using TiKV', 'subscribe-blog-btn-middle')"><button>Subscribe to Blog</button></a>
  </div>
<h2 id="use-tikv-in-juicefs">Use TiKV in JuiceFS</h2>
<p>Here I refer to <a href="https://github.com/juicedata/juicefs/blob/main/docs/en/quick_start_guide.md#2-object-storage">JuiceFS Quick Start Guide</a>, and build a MinIO object storage locally. The access address is <a href="http://127.0.0.1:9000">http://127.0.0.1:9000</a>, and <code>Access Key ID</code> and <code>Access Key Secret</code> are both <code>minioadmin</code>.</p>
<h3 id="create-a-file-system">Create a file system</h3>
<p>The following command uses the <code>format</code> subcommand provided by the JuiceFS client to create a file system named <code>mystor</code>. In this command, <a href="https://github.com/juicedata/juicefs/blob/main/docs/en/databases_for_metadata.md#TiKV">TiKV database address format</a> uses the PD address of the TiKV cluster:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">juicefs format <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --storage minio <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --bucket<span style="color:#f92672">[</span> http://127.0.0.1:9000/mystor<span style="color:#f92672">]</span><span style="color:#f92672">(</span>http://127.0.0.1:9000/mystor<span style="color:#f92672">)</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --access-key minioadmin <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    --secret-key minioadmin <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    tikv://127.0.0.1:2379/mystor <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    mystor
</code></pre></div><p>Parameter Description:</p>
<ul>
<li><code>--storage</code>: Specifies the data storage engine, here is <code>minio</code>.</li>
<li><code>--bucket</code>: Specifies the bucket access URL. In this case, it is the bucket <code>mystor</code> I created in advance on MinIO.</li>
<li><code>--access-key</code> and <code>--secret-key</code>: Specifies the secret key for accessing the object storage service API.</li>
<li>When you use TiKV to store metadata, set the PD address of the cluster. When multiple file systems or applications share the same TiKV, it is recommended to add a prefix. In this case, the prefix <code>mystor</code> is specified in the PD address.</li>
</ul>
<p>If you see output similar to the following, the file system was created successfully:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">2021/08/12 23:28:36.932241 juicefs[101222] &lt;INFO&gt;: Meta address: tikv://127.0.0.1:2379/mystor
[2021/08/12 23:28:36.932 +08:00] [INFO] [client.go:214] [&#34;[pd] create pd client with endpoints&#34;] [pd-address=&#34;[127.0.0.1:2379]&#34;]
[2021/08/12 23:28:36.935 +08:00] [INFO] [base_client.go:346] [&#34;[pd] switch leader&#34;] [new-leader=http://127.0.0.1:2379] [old-leader=]
[2021/08/12 23:28:36.935 +08:00] [INFO] [base_client.go:126] [&#34;[pd] init cluster id&#34;] [cluster-id=6995548759432331426]
[2021/08/12 23:28:36.935 +08:00] [INFO] [client.go:238] [&#34;[pd] create tso dispatcher&#34;] [dc-location=global]
2021/08/12 23:28:36.936892 juicefs[101222] &lt;INFO&gt;: Data uses minio://127.0.0.1:9000/mystor/mystor/
2021/08/12 23:28:36.976722 juicefs[101222] &lt;INFO&gt;: Volume is formatted as {Name:mystor UUID:0c9594a8-fe2c-463c-a4b6-eb815f38c843 Storage:minio Bucket:http://127.0.0.1:9000/mystor AccessKey:minioadmin SecretKey:removed BlockSize:4096 Compression:none Shards:0 Partitions:0 Capacity:0 Inodes:0 EncryptKey:}
</code></pre></div><h3 id="mount-the-file-system">Mount the file system</h3>
<p>Use the <code>mount</code> subcommand to mount the file system to the <code>jfs</code> directory under the current user's home directory:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo juicefs mount -d tikv://127.0.0.1:2379/mystor ~/jfs
</code></pre></div><p>The <code>sudo</code> command is used here to mount the file system as a super user. The purpose is to allow JuiceFS to create and use the /var/jfsCache directory to cache data.</p>
<p>If you see output similar to the following, the file system is mounted successfully:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">2021/08/12 23:34:44.288136 juicefs[101873] &lt;INFO&gt;: Meta address: tikv://127.0.0.1:2379/mystor
[2021/08/12 23:34:44.288 +08:00] [INFO] [client.go:214] [&#34;[pd] create pd client with endpoints&#34;] [pd-address=&#34;[127.0.0.1:2379]&#34;]
[2021/08/12 23:34:44.291 +08:00] [INFO] [base_client.go:346] [&#34;[pd] switch leader&#34;] [new-leader=http://127.0.0.1:2379] [old-leader=]
[2021/08/12 23:34:44.291 +08:00] [INFO] [base_client.go:126] [&#34;[pd] init cluster id&#34;] [cluster-id=6995548759432331426]
[2021/08/12 23:34:44.291 +08:00] [INFO] [client.go:238] [&#34;[pd] create tso dispatcher&#34;] [dc-location=global]
2021/08/12 23:34:44.296270 juicefs[101873] &lt;INFO&gt;: Data use minio://127.0.0.1:9000/mystor/mystor/
2021/08/12 23:34:44.296768 juicefs[101873] &lt;INFO&gt;: Disk cache (/var/jfsCache/0c9594a8-fe2c-463c-a4b6-eb815f38c843/): capacity (1024 MB), free ratio (10%), max pending pages (15)
2021/08/12 23:34:44.800551 juicefs[101873] &lt;INFO&gt;: OK, mystor is ready at /home/herald/jfs
</code></pre></div><p>Use the <code>df</code> command to see the mounting status of the file system:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">df -Th
File system    type             capacity used usable used%  mount point
JuiceFS:mystor fuse.juicefs       1.0P   64K  1.0P    1%   /home/herald/jfs
</code></pre></div><p>After mounting, you can now store data in the <code>~/jfs</code> directory just like using a local hard disk.</p>
<h3 id="view-file-system-information">View file system information</h3>
<p>The <code>status</code> subcommand can view the basic information and connection status of a file system.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">juicefs status tikv://127.0.0.1:2379/mystor

<span style="color:#f92672">{</span>
 <span style="color:#e6db74">&#34;Setting&#34;</span>: <span style="color:#f92672">{</span>
   <span style="color:#e6db74">&#34;Name&#34;</span>: <span style="color:#e6db74">&#34;mystor&#34;</span>,
   <span style="color:#e6db74">&#34;UUID&#34;</span>: <span style="color:#e6db74">&#34;9f50f373-a7ec-4d5b-b790-3defbf6d0509&#34;</span>,
   <span style="color:#e6db74">&#34;Storage&#34;</span>: <span style="color:#e6db74">&#34;minio&#34;</span>,
   <span style="color:#e6db74">&#34;Bucket&#34;</span>: <span style="color:#e6db74">&#34;http://127.0.0.1:9000/mystor&#34;</span>,
   <span style="color:#e6db74">&#34;AccessKey&#34;</span>: <span style="color:#e6db74">&#34;minioadmin&#34;</span>,
   <span style="color:#e6db74">&#34;SecretKey&#34;</span>: <span style="color:#e6db74">&#34;removed&#34;</span>,
   <span style="color:#e6db74">&#34;BlockSize&#34;</span>: 4096,
   <span style="color:#e6db74">&#34;Compression&#34;</span>: <span style="color:#e6db74">&#34;none&#34;</span>,
   <span style="color:#e6db74">&#34;Shards&#34;</span>: 0,
   <span style="color:#e6db74">&#34;Partitions&#34;</span>: 0,
   <span style="color:#e6db74">&#34;Capacity&#34;</span>: 0,
   <span style="color:#e6db74">&#34;Inodes&#34;</span>: <span style="color:#ae81ff">0</span>
 <span style="color:#f92672">}</span>,

 <span style="color:#e6db74">&#34;Sessions&#34;</span>: <span style="color:#f92672">[</span>
   <span style="color:#f92672">{</span>
     <span style="color:#e6db74">&#34;Sid&#34;</span>: 2,
     <span style="color:#e6db74">&#34;Heartbeat&#34;</span>: <span style="color:#e6db74">&#34;2021-08-13T10:43:35+08:00&#34;</span>,
     <span style="color:#e6db74">&#34;Version&#34;</span>: <span style="color:#e6db74">&#34;0.16-dev (2021-08-12 a871c3d)&#34;</span>,
     <span style="color:#e6db74">&#34;Hostname&#34;</span>: <span style="color:#e6db74">&#34;herald-manjaro&#34;</span>,
     <span style="color:#e6db74">&#34;MountPoint&#34;</span>: <span style="color:#e6db74">&#34;/home/herald/jfs&#34;</span>,
     <span style="color:#e6db74">&#34;ProcessID&#34;</span>: <span style="color:#ae81ff">6309</span>
   <span style="color:#f92672">}</span>
 <span style="color:#f92672">]</span>
<span style="color:#f92672">}</span>
</code></pre></div><p>In the output, you can learn more about the data storage engine used by the file system and the status of the host that the file system mounts on.</p>
<p>In addition, v0.16 and above can also learn the detailed configuration of the file system by viewing the <code>.config</code> virtual file in the root directory of the mount point:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo cat ~/jfs/.config

<span style="color:#f92672">{</span>
<span style="color:#e6db74">&#34;Meta&#34;</span>: <span style="color:#f92672">{</span>
 <span style="color:#e6db74">&#34;Strict&#34;</span>: true,
 <span style="color:#e6db74">&#34;Retries&#34;</span>: 10,
 <span style="color:#e6db74">&#34;CaseInsensi&#34;</span>: false,
 <span style="color:#e6db74">&#34;ReadOnly&#34;</span>: false,
 <span style="color:#e6db74">&#34;OpenCache&#34;</span>: 0,
 <span style="color:#e6db74">&#34;MountPoint&#34;</span>: <span style="color:#e6db74">&#34;jfs&#34;</span>,
 <span style="color:#e6db74">&#34;Subdir&#34;</span>: <span style="color:#e6db74">&#34;&#34;</span>
<span style="color:#f92672">}</span>,

<span style="color:#e6db74">&#34;Format&#34;</span>: <span style="color:#f92672">{</span>
 <span style="color:#e6db74">&#34;Name&#34;</span>: <span style="color:#e6db74">&#34;myabc&#34;</span>,
 <span style="color:#e6db74">&#34;UUID&#34;</span>: <span style="color:#e6db74">&#34;e9d8373c-7ced-49d9-a033-75f6abb44854&#34;</span>,
 <span style="color:#e6db74">&#34;Storage&#34;</span>: <span style="color:#e6db74">&#34;minio&#34;</span>,
 <span style="color:#e6db74">&#34;Bucket&#34;</span>: <span style="color:#e6db74">&#34;http://127.0.0.1:9000/mystor&#34;</span>,
 <span style="color:#e6db74">&#34;AccessKey&#34;</span>: <span style="color:#e6db74">&#34;minioadmin&#34;</span>,
 <span style="color:#e6db74">&#34;SecretKey&#34;</span>: <span style="color:#e6db74">&#34;removed&#34;</span>,
 <span style="color:#e6db74">&#34;BlockSize&#34;</span>: 4096,
 <span style="color:#e6db74">&#34;Compression&#34;</span>: <span style="color:#e6db74">&#34;none&#34;</span>,
 <span style="color:#e6db74">&#34;Shards&#34;</span>: 0,
 <span style="color:#e6db74">&#34;Partitions&#34;</span>: 0,
 <span style="color:#e6db74">&#34;Capacity&#34;</span>: 0,
 <span style="color:#e6db74">&#34;Inodes&#34;</span>: <span style="color:#ae81ff">0</span>
<span style="color:#f92672">}</span>,

<span style="color:#e6db74">&#34;Chunk&#34;</span>: <span style="color:#f92672">{</span>
 <span style="color:#e6db74">&#34;CacheDir&#34;</span>: <span style="color:#e6db74">&#34;/var/jfsCache/e9d8373c-7ced-49d9-a033-75f6abb44854&#34;</span>,
 <span style="color:#e6db74">&#34;CacheMode&#34;</span>: 384,
 <span style="color:#e6db74">&#34;CacheSize&#34;</span>: 1024,
 <span style="color:#e6db74">&#34;FreeSpace&#34;</span>: 0.1,
 <span style="color:#e6db74">&#34;AutoCreate&#34;</span>: true,
 <span style="color:#e6db74">&#34;Compress&#34;</span>: <span style="color:#e6db74">&#34;none&#34;</span>,
 <span style="color:#e6db74">&#34;MaxUpload&#34;</span>: 20,
 <span style="color:#e6db74">&#34;Writeback&#34;</span>: false,
 <span style="color:#e6db74">&#34;Partitions&#34;</span>: 0,
 <span style="color:#e6db74">&#34;BlockSize&#34;</span>: 4194304,
 <span style="color:#e6db74">&#34;GetTimeout&#34;</span>: 60000000000,
 <span style="color:#e6db74">&#34;PutTimeout&#34;</span>: 60000000000,
 <span style="color:#e6db74">&#34;CacheFullBlock&#34;</span>: true,
 <span style="color:#e6db74">&#34;BufferSize&#34;</span>: 314572800,
 <span style="color:#e6db74">&#34;Readahead&#34;</span>: 0,
 <span style="color:#e6db74">&#34;Prefetch&#34;</span>: <span style="color:#ae81ff">1</span>
<span style="color:#f92672">}</span>,

<span style="color:#e6db74">&#34;Version&#34;</span>: <span style="color:#e6db74">&#34;0.16.1 (2021-08-16 2edcfc0)&#34;</span>,
<span style="color:#e6db74">&#34;Mountpoint&#34;</span>: <span style="color:#e6db74">&#34;jfs&#34;</span>
<span style="color:#f92672">}</span>
</code></pre></div><p><strong>Notice</strong>: It is important to note that this article uses a local demo environment. If you need to share and mount the same JuiceFS file system on multiple hosts, make sure that the deployed object storage and TiKV cluster can be accessed by all hosts.</p>
<h3 id="unmount-the-file-system">Unmount the file system</h3>
<p>You can use the <code>umount</code> subcommand to unmount the file system, for example:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo juicefs umount ~/jfs
</code></pre></div><p><strong>Warning</strong>: <a href="https://github.com/juicedata/juicefs/blob/main/docs/en/quick_start_guide.md#7-unmount-juicefs">Force the unmount of the file system in use</a> may cause data damage or loss, please be careful.</p>
<h3 id="mount-at-boot">Mount at boot</h3>
<p>If you don't want to manually remount JFS on every reboot, you can set up auto mounting.</p>
<p>First, rename the <code>juicefs</code> client to <code>mount.juicefs</code> and copy it to the <code>/sbin/</code> directory:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo cp /usr/local/bin/juicefs /sbin/mount.juicefs
</code></pre></div><p>Edit the <code>/etc/fstab</code> configuration file and add a new record:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">tikv://127.0.0.1:2379/mystor    /home/herald/jfs       juicefs     _netdev,cache-size=20480     0  0
</code></pre></div><p>In the mount option, <code>cache-size=20480</code> means allocating 20GB of local disk space to JuiceFS cache. Please determine the allocated size according to the actual hardware conditions. Generally speaking, the more cache space for JuiceFS, the better performance.</p>
<p>You can adjust the <a href="https://github.com/juicedata/juicefs/blob/main/docs/en/fuse_mount_options.md">FUSE mount options</a> in the above configuration according to your needs.</p>
<h2 id="benchmarking-tikv-mysql-and-redis">Benchmarking TiKV, MySQL, and Redis</h2>
<p>To understand the differences between TiKV and other backends, we benchmarked the performance of TiKV, MySQL, and Redis using Golang's benchmarking tools. In the same environment, the three databases&rsquo; performance varies a lot:</p>
<p><img src="media/juicefs-benchmarking-tikv-mysql-redis.png" alt="Benchmarking the performance of TiKV, MySQL, and Redis"></p>
<p>The figures in the table refer to the duration (in microseconds) of each operation, so the smaller duration, the better performance. The digits in parentheses are the ratio to that of Redis-Always.</p>
<p>Both Redis and MySQL have only one replica in the benchmarking, while TiKV uses a three-replica distributed architecture. <strong>Even though TiKV has three replicas, it still performs better than MySQL.</strong> TiKV is 2~3 times slower than Redis in terms of metadata operations alone. However, when it comes to data storage, object storage latency takes large proportions, so in real-life business, the latency gap between TiKV and Redis is much smaller, and, more importantly, TiKV outperforms Redis in terms of reliability and scalability.</p>
<h2 id="summary">Summary</h2>
<p>For JuiceFS, the support for TiKV as a metadata engine is a milestone. As a new choice for JuiceFS users, TiKV provides easier horizontal scaling than Redis and better performance than MySQL and PostgreSQL.</p>
<p>JuiceFS is an open-source project under the AGPLv3, and its development is inseparable from everyone's contribution. An article, a page of documentation, an idea, a suggestion, a report, or a bug fix, no matter how big or small the contribution is, is the driving force for the progress of an open-source project.</p>
<p>If you're interested in JuiceFS, here is what you can do for the community:</p>
<ul>
<li>Starring the <a href="https://github.com/juicedata/juicefs">project</a> on GitHub</li>
<li>Post your opinion on the <a href="https://github.com/juicedata/juicefs/discussions">Forum</a></li>
<li>Pick a task from <a href="https://github.com/juicedata/juicefs/issues">Issues</a></li>
<li>Improve our <a href="https://github.com/juicedata/juicefs/tree/main/docs">document</a></li>
<li>Share anything about JuiceFS on your blog, Twitter, Vlog, or other social media.</li>
<li>Join our <a href="https://juicefs.slack.com/">Slack channel</a></li>
<li>Tell more people about JuiceFS</li>
</ul>
<p>We sincerely welcome everyone who loves open source to join our community and make JuiceFS better together!</p>
<p><em>An original version of this article was published on <a href="https://juicefs.medium.com/getting-started-with-juicefs-using-tikv-database-b1a585633b1d">Medium</a>.</em></p>
</div>
                </div>
                <div class="article-toc"></div><div class="ssba-wrap">
    <div class="ssba">
        <a data-site="" class="ssba_twitter_share" href="http://twitter.com/share?url=https%3a%2f%2fidiks.com%2fblog%2fget-started-with-juicefs-using-tikv%2f" target="_blank">
        
            <img src="/images/svgs/twitter-icon.svg" alt="Twitter icon" />
        </a>
        <a data-site="reddit" class="ssba_reddit_share" href="http://reddit.com/submit?url=https%3a%2f%2fidiks.com%2fblog%2fget-started-with-juicefs-using-tikv%2f&title=Getting%20Started%20with%20JuiceFS%20Using%20TiKV" target="_blank">
        
            <img src="/images/svgs/reddit-icon.svg" alt="Reddit icon" />
        </a>
        <a data-site="" class="ssba_facebook_share" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fidiks.com%2fblog%2fget-started-with-juicefs-using-tikv%2f" target="_blank">
        
            <img src="/images/svgs/facebook-icon.svg" alt="Fackbook icon" />
        </a>
        <a data-site="linkedin" class="ssba_linkedin_share" href="http://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fidiks.com%2fblog%2fget-started-with-juicefs-using-tikv%2f" target="_blank">
        
            <img src="/images/svgs/linkedin-icon.svg" alt="Linkedin icon" />
        </a>
        <a data-site="hackernews" class="ssba_hackernews_share" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fidiks.com%2fblog%2fget-started-with-juicefs-using-tikv%2f&t=Getting%20Started%20with%20JuiceFS%20Using%20TiKV" target="_blank">
        
            <img src="/images/svgs/hacker-news-icon.svg" alt="Hacker News icon" />
        </a>
    </div>
</div>
<div class="trackable-btns">
                    <a href="/download" onclick="trackViews('Getting Started with JuiceFS Using TiKV', 'download-tidb-btn-bottom')"><button>Download
                        TiDB</button></a>
                    <a href="https://share.hsforms.com/1e2W03wLJQQKPd1d9rCbj_Q2npzm"
                      onclick="trackViews('Getting Started with JuiceFS Using TiKV', 'subscribe-blog-btn-bottom')"><button>Subscribe to
                        Blog</button></a>
                </div>
            </div>
            <div class="sidebar-page">
                <div class="sticky-sidebar">
                    <p class="toc-title">What’s on this page</p>
                    <div id="smart_toc_wrapper"></div>
                </div>
            </div>
        </div>
    </div>
<footer>
    <div class="container">
        <div class="flex-list-wrap">
            <div class="flex-list">
                <h4 class="list-title"><strong>Product</strong></h4>
                <ul>
                <li><a href="/docs/v3.0/">TiDB</a></li>
                <li><a href="/docs/v3.0/reference/tispark/">TiSpark</a></li>
                <li><a href="/docs/v3.0/roadmap/">Roadmap</a></li>
                </ul>
            </div>
            <div class="flex-list">
                <h4 class="list-title"><strong>Docs</strong></h4>
                <ul>
                <li><a href="/docs/stable/quick-start-with-tidb/">Quick Start</a></li>
                <li><a href="/blog/2017-07-24-tidbbestpractice/">Best Practices</a></li>
                <li><a href="/docs/stable/faq/tidb/">FAQ</a></li>
                <li><a href="/docs/stable/reference/tools/user-guide/">TiDB Tools</a></li>
                <li><a href="/docs/dev/releases/rn/">Release Notes</a></li>
                </ul>
            </div>
            <div class="flex-list">
                <h4 class="list-title"><strong>Resources</strong></h4>
                <ul>
                <li><a href="/blog/">Blog</a></li>
                <li><a href="/weekly/">Monthly</a></li>
                <li><a href="https://github.com/idiks" target="_blank">GitHub</a></li>
                <li><a href="/community">TiDB Community</a></li>
                </ul>
            </div>
            <div class="flex-list">
                <h4 class="list-title"><strong>Company</strong></h4>
                <ul>
                <li><a href="/about/">About</a></li>
                <li><a href="/jobs" target="_blank">Careers</a></li>
                <li><a href="/news/">News</a></li>
                <li><a href="/contact-us/">Contact Us</a></li>
                <li><a href="/privacy-policy/">Privacy Policy</a></li>
                <li><a href="/terms-of-service/">Terms of Service</a></li>
                </ul>
            </div>
        </div>
        <div class="contact-list-wrap">
            <div class="flex-list">
                <h4 class="list-title"><strong>Connect</strong></h4>
                <ul>
                <li><a href="https://twitter.com/idiks" class="twitter" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 612 612" width="18" height="19"><path d="M612 116.258a250.714 250.714 0 0 1-72.088 19.772c25.929-15.527 45.777-40.155 55.184-69.411-24.322 14.379-51.169 24.82-79.775 30.48-22.907-24.437-55.49-39.658-91.63-39.658-69.334 0-125.551 56.217-125.551 125.513 0 9.828 1.109 19.427 3.251 28.606-104.326-5.24-196.835-55.223-258.75-131.174-10.823 18.51-16.98 40.078-16.98 63.101 0 43.559 22.181 81.993 55.835 104.479a125.556 125.556 0 0 1-56.867-15.756v1.568c0 60.806 43.291 111.554 100.693 123.104-10.517 2.83-21.607 4.398-33.08 4.398-8.107 0-15.947-.803-23.634-2.333 15.985 49.907 62.336 86.199 117.253 87.194-42.947 33.654-97.099 53.655-155.916 53.655-10.134 0-20.116-.612-29.944-1.721 55.567 35.681 121.536 56.485 192.438 56.485 230.948 0 357.188-191.291 357.188-357.188l-.421-16.253c24.666-17.593 46.005-39.697 62.794-64.861z"/></svg> Twitter</a></li>
                <li><a href="https://www.linkedin.com/company/idiks/" class="linkedin" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="16" viewBox="0 0 438.536 438.535"><path d="M5.424 145.895H99.64v282.932H5.424zM408.842 171.739c-19.791-21.604-45.967-32.408-78.512-32.408-11.991 0-22.891 1.475-32.695 4.427-9.801 2.95-18.079 7.089-24.838 12.419-6.755 5.33-12.135 10.278-16.129 14.844-3.798 4.337-7.512 9.389-11.136 15.104v-40.232h-93.935l.288 13.706c.193 9.139.288 37.307.288 84.508 0 47.205-.19 108.777-.572 184.722h93.931V270.942c0-9.705 1.041-17.412 3.139-23.127 4-9.712 10.037-17.843 18.131-24.407 8.093-6.572 18.13-9.855 30.125-9.855 16.364 0 28.407 5.662 36.117 16.987 7.707 11.324 11.561 26.98 11.561 46.966V428.82h93.931V266.664c-.007-41.688-9.897-73.328-29.694-94.925zM53.103 9.708c-15.796 0-28.595 4.619-38.4 13.848C4.899 32.787 0 44.441 0 58.529 0 72.42 4.758 84.034 14.275 93.358c9.514 9.325 22.078 13.99 37.685 13.99h.571c15.99 0 28.887-4.661 38.688-13.99 9.801-9.324 14.606-20.934 14.417-34.829-.19-14.087-5.047-25.742-14.561-34.973C81.562 14.323 68.9 9.708 53.103 9.708z"/></svg> LinkedIn</a></li>
                <li><a href="https://www.reddit.com/r/idiks/" class="reddit" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 279.748 279.748" width="18" height="18"><path d="M279.748 133.142c0-19.299-15.701-35-35-35-10.768 0-20.674 4.812-27.279 13.064-18.532-8.431-39.663-13.626-62.015-15.271l19.206-60.692 42.895 9.294c3.285 12.782 14.901 22.258 28.693 22.258 16.336 0 29.627-13.29 29.627-29.626 0-16.336-13.291-29.627-29.627-29.627-11.801 0-21.999 6.941-26.759 16.95l-49.497-10.725a10.002 10.002 0 0 0-11.651 6.756L134.636 95.43c-26.164.638-50.988 6.053-72.356 15.775-6.606-8.251-16.512-13.063-27.28-13.063-19.299 0-35 15.701-35 35 0 9.373 3.683 18.173 10.222 24.709-3.9 8.37-5.875 17.076-5.875 25.936 0 24.048 14.396 46.492 40.538 63.199 25.447 16.264 59.183 25.221 94.989 25.221 35.808 0 69.542-8.957 94.989-25.221 26.142-16.707 40.538-39.151 40.538-63.199 0-8.859-1.975-17.565-5.875-25.936 6.539-6.537 10.222-15.336 10.222-24.709zM15.369 145.139c-2.212-3.59-3.369-7.688-3.369-11.997 0-12.682 10.317-23 23-23 5.444 0 10.558 1.851 14.649 5.258-14.622 8.302-26.132 18.289-34.28 29.739zm52.671 20.266c0-13.785 11.215-25 25-25s25 11.215 25 25-11.215 25-25 25-25-11.215-25-25zm123.119 57.054c-9.745 10.637-29.396 17.244-51.285 17.244-21.888 0-41.539-6.607-51.284-17.244a9.937 9.937 0 0 1-2.617-7.192 9.933 9.933 0 0 1 3.235-6.937 9.974 9.974 0 0 1 6.754-2.627c2.797 0 5.484 1.183 7.373 3.244 5.803 6.333 20.827 10.756 36.539 10.756s30.737-4.423 36.539-10.756a10.022 10.022 0 0 1 7.374-3.244c2.508 0 4.906.933 6.755 2.627a9.928 9.928 0 0 1 3.234 6.937 9.933 9.933 0 0 1-2.617 7.192zm-4.451-32.054c-13.785 0-25-11.215-25-25s11.215-25 25-25 25 11.215 25 25-11.215 25-25 25zm77.671-45.266c-8.147-11.45-19.657-21.436-34.28-29.739 4.092-3.408 9.205-5.258 14.649-5.258 12.683 0 23 10.318 23 23 0 4.309-1.157 8.407-3.369 11.997z"/></svg>Reddit</a></li>
                <li><a href="https://groups.google.com/forum/#!forum/idiks-user" class="google-plus" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 491.858 491.858" width="18" height="20"><path d="M377.472 224.957H201.319v58.718H308.79c-16.032 51.048-63.714 88.077-120.055 88.077-69.492 0-125.823-56.335-125.823-125.824 0-69.492 56.333-125.823 125.823-125.823 34.994 0 66.645 14.289 89.452 37.346l42.622-46.328c-34.04-33.355-80.65-53.929-132.074-53.929C84.5 57.193 0 141.693 0 245.928s84.5 188.737 188.736 188.737c91.307 0 171.248-64.844 188.737-150.989v-58.718l-.001-.001zM491.858 224.857h-36.031v-36.031h-30.886v36.031H388.91v30.883h36.031v36.032h30.886V255.74h36.031z"/></svg>Google Group</a></li>
                <li><a href="https://stackoverflow.com/questions/tagged/idiks" class="stack-overflow" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="17" viewBox="0 0 547.597 547.597"><path d="M140.81 475.111h.024l189.91-.269c8.434-.013 15.3-6.886 15.3-15.318v-21.298c0-8.428-6.854-15.288-15.3-15.288l-189.91.264c-8.433.012-15.3 6.885-15.3 15.318v21.31c.001 8.427 6.855 15.281 15.276 15.281z"/><path d="M58.667 517.854c.073 29.26.073 29.449 3.072 29.449h.055l10.612.294h.086s85.814 0 171.629-.036c42.914-.019 85.821-.05 118-.092 16.09-.019 29.505-.043 38.887-.074 17.803-.055 17.803-.055 17.803-3.072l.3-10.697V333.299c0-8.434-6.866-15.3-15.3-15.3h-11.909c-8.434 0-15.3 6.866-15.3 15.3V496.22c0 5.062-4.119 9.18-9.181 9.18H110.51c-5.061 0-9.18-4.118-9.18-9.18V333.299c0-8.434-6.867-15.3-15.3-15.3H73.82c-8.433 0-15.3 6.86-15.3 15.3 0 23.342.012 76.084.055 122.981.019 23.447.05 45.442.092 61.574z"/><path d="M142.322 397.399l189.402 17.467c.478.043.948.062 1.413.062 7.956 0 14.468-5.985 15.159-13.917l1.83-21.096c.729-8.396-5.508-15.851-13.898-16.628l-189.102-17.461c-8.593-.795-15.869 5.441-16.653 13.825l-1.97 21.108a15.172 15.172 0 0 0 3.452 11.181 15.19 15.19 0 0 0 10.367 5.459zM437.636 208.849a15.253 15.253 0 0 0 17.694 12.443l21.065-3.678c8.311-1.451 13.898-9.395 12.454-17.706l-32.504-187.23c-1.42-8.207-9.21-13.917-17.692-12.448l-21.065 3.678c-8.311 1.451-13.898 9.395-12.454 17.705l32.502 187.236zM190.333 194.375l163.6 96.708a15.28 15.28 0 0 0 7.778 2.136c5.393 0 10.447-2.876 13.183-7.509l10.876-18.36c2.08-3.519 2.674-7.631 1.658-11.591a15.18 15.18 0 0 0-7.032-9.358l-163.6-96.714c-7.014-4.149-16.836-1.597-20.967 5.374l-10.869 18.36a15.2 15.2 0 0 0-1.658 11.591 15.21 15.21 0 0 0 7.031 9.363zM387.525 240.501a15.276 15.276 0 0 0 12.626 6.659c3.091 0 6.077-.924 8.635-2.681l17.405-11.934c6.953-4.768 8.752-14.314 4.015-21.292L323.29 54.104c-4.584-6.732-14.498-8.623-21.236-3.984l-17.737 12.21c-6.945 4.779-8.727 14.327-3.971 21.291l107.179 156.88zM154.482 302.319l183.465 49.156c1.298.349 2.632.526 3.966.526 6.903 0 12.98-4.67 14.762-11.347l5.508-20.624c2.179-8.152-2.681-16.555-10.826-18.74l-183.465-49.162c-8.017-2.148-16.604 2.852-18.728 10.826l-5.508 20.63c-2.179 8.142 2.68 16.551 10.826 18.735z"/></svg>Stack Overflow</a></li>
                </ul>
            </div>
            <div class="subscribe">
                <a href="https://share.hsforms.com/1e2W03wLJQQKPd1d9rCbj_Q2npzm"><button class="btn btn-subscribe f-tc">Subscribe to Blog</button></a>
            </div>
        </div>
    </div>
    <div class="container copyright-container">
        <p class="copyright">&copy; 2025 iDIKS. All Rights Reserved.</p>
        <a href="/blog-cn" class="copyright-btn-lang" id="lang">中文</a>
    </div>
</footer>
<button class="back-to-top" type="button"><svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 284.929 284.929"><path d="M282.082 195.285L149.028 62.24c-1.901-1.903-4.088-2.856-6.562-2.856s-4.665.953-6.567 2.856L2.856 195.285C.95 197.191 0 199.378 0 201.853c0 2.474.953 4.664 2.856 6.566l14.272 14.271c1.903 1.903 4.093 2.854 6.567 2.854s4.664-.951 6.567-2.854l112.204-112.202 112.208 112.209c1.902 1.903 4.093 2.848 6.563 2.848 2.478 0 4.668-.951 6.57-2.848l14.274-14.277c1.902-1.902 2.847-4.093 2.847-6.566.001-2.476-.944-4.666-2.846-6.569z" fill="#FFF"/></svg>
</button>
</div><div class="overlay"></div><script src="https://static.idiks.com/js/jquery.min.js"></script><script type="text/javascript" src="/js/vendor/lazyload.min.js"></script>
    <script type="text/javascript" src="/js/doc.js"></script>
    <script type="text/javascript" src="/js/anchor.js"></script><script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script src="https://browser.sentry-cdn.com/5.11.0/bundle.min.js" integrity="sha384-jbFinqIbKkHNg+QL+yxB4VrBC0EAPTuaLGeRT0T+NfEV89YC6u1bKxHLwoo+/xxY" crossorigin="anonymous"></script><script>Sentry.init({ 
            dsn: 'https://3f28ed393c5545daa74496b3cdb2e9ba@sentry.io/1887163' 
        });</script><script src="/js/app.js"></script></body></html>